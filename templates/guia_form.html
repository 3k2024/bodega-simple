{% extends "base.html" %}
{% block content %}

<script>
  const token = localStorage.getItem("access_token");
  if (!token) {
    window.location.href = "/login";
  }
</script>

<h3>Crear guía e ítem inicial</h3>

<form action="/nueva-guia" method="post" class="grid-2">
  <label for="id_guid">GD (Número de guía):
    <input type="text" id="id_guid" name="id_guid" required aria-required="true">
  </label>

  <label for="tag">TAG:
    <input type="text" id="tag" name="tag" required aria-required="true">
  </label>

  <label for="descripcion">Descripción:
    <input type="text" id="descripcion" name="descripcion" required aria-required="true">
  </label>

  <label for="cantidad">Cantidad:
    <input type="number" id="cantidad" name="cantidad" min="0" value="0" required aria-required="true">
  </label>

  <label for="fecha">Fecha:
    <input type="date" id="fecha" name="fecha" value="{{ hoy }}" required aria-required="true">
  </label>

  <label for="proveedor">Proveedor:
    <input type="text" id="proveedor" name="proveedor" required aria-required="true">
  </label>

  <label for="especialidad">Especialidad:
    <select id="especialidad" name="especialidad" required aria-required="true">
      <option value="">-- Selecciona --</option>
      {% for e in especialidades %}
      <option value="{{ e }}">{{ e }}</option>
      {% endfor %}
    </select>
  </label>

  <label for="observacion">Observación:
    <input type="text" id="observacion" name="observacion" required aria-required="true">
  </label>

  <div style="grid-column: 1 / -1; margin-top: 1rem;">
    <button type="submit" class="button-primary">Crear guía</button>
    {% if error %}
      <p style="color:red; margin-top:0.5rem;">{{ error }}</p>
    {% endif %}
  </div>
</form>

{% endblock %}
